<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>参考文献リスト自動生成</title>
  <link rel="stylesheet" href="css/sample.css">
</head>

<body>
    <header>
      <h1>参考文献リスト自動生成</h1>
      <p>「論文まで提出ギリギリなのに参考文献を書くのめんどくさい...」<br>
          と考えているそこのあなたに朗報！<br>
          書式を調べる手間を省くことのできる「究極の時短ツール」をお使いください。
      </p>
    </header>
  <div class="box_flex">
    <div>
      <main>
        <label for="select">参考文献の種類を選択</label>
        <select name="book_or_web">
          <option value="">選択してください</option>
          <option value="">書籍</option>
          <option value="">Webサイト</option>
        </select>

        <select id="choice_name">
            <input type="radio" name="author">著者名</input>
            <input type="radio" name="author" id="henjamei">編者名</input>
        </select>

          <div>
            <textarea id="text_area1"></textarea>
          </div>
          
          <div>
            <p>出版年</p>
            <textarea id="text_area2"></textarea>
            <!-- 1900-2022まで -->
          </div>

          <div>
            <p>タイトル</p>
            <textarea id="text_area3"></textarea>
          </div>

          <div>出版社</div>
            <textarea id="text_area4"></textarea>
          
          <div>ページ</div>
            <textarea id="text_area5"></textarea>


        <ul>
          <button id="save">保存</button>
          <button id="produce">生成する</button>
          <button id="clear">削除</button>
        </ul>
      </main>
    </div>
    <div>
      <!-- 出力 -->
      <div>
        <textarea id="push_text"></textarea>
      </div>
      <div>
        <button onclick="copy()">コピーする</button>
      </div>
    </div>
  </div>
</div>
  <footer>
    <small>参考文献リスト自動生成</small>
  </footer>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>

  //   //1900-2022年までを表示させる 
  //     const start = 1900;
  //     const end = 2022;
  //     let options = '';
  //   for (let i = start; i <= end; i++) {
  //     options += '<option value = "">' + i + '</option>';

  // // optionsをjsonDataに登録する
  //   }
  // console.log(options);
  // $('#text_area2').html(options);   
  // // optionsをjsonDataに登録する


  
    // 空の配列
    const essay = [];
    

    //テキストを入れる・登録する
  //JSON を配列やオブジェクトに戻す処理
    if (localStorage.getItem('memo')) {
    const jsonData = localStorage.getItem('memo');
    console.log(jsonData);
    const data = JSON.parse(jsonData);
      
    for (var i = 0; i < essay.data; i++) {
      const author = data[i].author;
      const year = data[i].year;
      const title = data[i].title;
      const company = data[i].company;
      const page = data[i].page;
      
      allData.push(essay[i])
    }


// テキストがローカルストレージに保存されます
    $('#save').on('click', function () {
      alert('ぺぺん1！');
      const author = $('#text_area1').val();
      const year = $('#text_area2').val();
      const title = $('#text_area3').val();
      const company = $('#text_area4').val();
      const page = $('#text_area5').val();

      const data = {
        author: author,
        year:year,
        title: title,
        company: company,
        page: page,
      };
// 配列やオブジェクトを JSON に変換する処理
      
      essay.push(data)
      const jsonData = JSON.stringify(essay);
      localStorage.setItem('memo', jsonData);
    });

    //テキストを削除する
    $('#clear').on('click', function () {
      localStorage.removeItem('memo');
      $('#text_area1').val();
      $('#text_area2').val();
      $('#text_area3').val();
      $('#text_area4').val();
      $('#text_area5').val();

    });

    // 取得した情報を一列に並べる
    if (localStorage.getItem('memo')) {
    const jsonData = localStorage.getItem('memo');
    console.log(jsonData);
    

    const data = JSON.parse(jsonData);
      $('#produce').on('click', function () {
        alert('ぺぺん2！');
        const author = data[i].author;
        const year = data[i].year;
        const title = data[i].title;
        const company = data[i].company;
        const page = data[i].page;   


      const penpen = data[i].author +'(' + data[i].year + '),『' + data[i].title +'』'+ data[i].company + ', pp.'+ data[i].page ;
      $("#push_text").val(penpen);
      });
      
    }
    }
      //クリップボードをコピー

      alert

        // // 編者名のテキストボックスに「編」というテキストを入れる
        //   $('#choice_name').on('click', function () {
        //     //選択したテキストエリアに「編」を出力する
        //     const henjamei = data.author + '編';
        //     $('#text_area1').val(henjamei);
        //   });


  </script>

</body>

</html>